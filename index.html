<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ã€Šé¢¨å£çš„é‚£å€‹äººã€‹â€” æ‡¸ç–‘äº’å‹•æ•…äº‹ RPG</title>
<style>
  :root{
    --bg:#0a0f1a; --bg2:#0d1324; --ink:#e9ecf5; --muted:#93a2c8;
    --gold:#e6c671; --blue:#3aa7ff; --accent:#6ad1ff; --danger:#ff6b6b; --good:#40e0a8;
    --shadow:0 10px 30px rgba(0,0,0,.45);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0; font-family:"Noto Sans TC",system-ui,-apple-system,"PingFang TC","Microsoft JhengHei",sans-serif;
    color:var(--ink); background: radial-gradient(1200px 700px at 70% -10%, #14213a44 0%, transparent 60%), linear-gradient(180deg,var(--bg) 0%, var(--bg2) 100%); overflow-x:hidden;}
  .fog::before,.fog::after{content:""; position:fixed; left:-10vw; top:-10vh; width:130vw; height:130vh; background: radial-gradient(closest-side, rgba(255,255,255,.06), rgba(255,255,255,0) 60%), radial-gradient(closest-side, rgba(100,160,255,.08), rgba(0,0,0,0) 60%); filter: blur(20px); mix-blend-mode: screen; pointer-events:none; animation:drift 28s linear infinite}
  .fog::after{animation-duration:42s; animation-direction:reverse; opacity:.7}
  @keyframes drift{from{transform:translateX(0) translateY(0) rotate(0)} to{transform:translateX(4vw) translateY(2vh) rotate(1turn)}}
  header{position:sticky; top:0; z-index:5; backdrop-filter:blur(8px); background:linear-gradient(180deg,#0b1222cc,#0b122200); border-bottom:1px solid #1d2742; padding:14px 18px 10px}
  .title{display:flex; align-items:center; gap:12px; letter-spacing:.5px}
  .title .dot{width:12px; height:12px; border-radius:50%; background: radial-gradient(circle at 30% 30%, #fff, var(--gold) 40%, #c49f45 60%, transparent 70%); box-shadow:0 0 16px #e6c671aa, 0 0 40px #3aa7ff33}
  .title h1{font-size:20px; margin:0}
  .subtitle{color:var(--muted); font-size:12px}
  .wrap{max-width:960px; margin:24px auto; padding:0 16px 80px}
  .panel{background:linear-gradient(180deg,#101731,#0c142a); border:1px solid #1d2742; border-radius:16px; box-shadow:var(--shadow); overflow:hidden}
  .story{padding:22px; line-height:1.8; font-size:16px; text-shadow:0 1px 0 #000}
  .scene-badge{display:inline-flex; align-items:center; gap:8px; color:#0b1324; background:linear-gradient(90deg,#e6c671,#9cd1ff); padding:6px 12px; border-radius:999px; font-weight:700; font-size:12px; letter-spacing:.4px; margin-bottom:8px}
  .choices{display:grid; gap:10px; grid-template-columns:1fr; padding:0 22px 20px}
  .choice{font-size: 16px; /* èª¿å¤§å­—é«” */; background:linear-gradient(180deg,#0f1a33,#0a1429); border:1px solid #203056; color:var(--ink); padding:14px 16px; border-radius:12px; text-align:left; cursor:pointer; transition:.2s transform,.3s border-color,.3s background}
  .choice:hover{transform:translateY(-1px); border-color:#3b5ea3}
  .choice strong{color:var(--gold)}
  .disabled{opacity:.5; pointer-events:none}
  .hud{display:grid; grid-template-columns:repeat(4,1fr); gap:14px; padding:16px 18px; border-top:1px solid #1d2742; background:#0b1222cc}
  .bar{display:flex; flex-direction:column; gap:6px; font-size:12px}
  .bar .name{color:var(--muted)}
  .track{height:10px; border-radius:8px; background:#0a132a; overflow:hidden; border:1px solid #203056}
  .fill{height:100%; width:0%; background:linear-gradient(90deg,#1b9be0,#e6c671 60%, #40e0a8); box-shadow: inset 0 0 8px #000, 0 0 12px #6ad1ff66; transition:width .5s ease-in-out}
  .footer{display:flex; gap:10px; align-items:center; justify-content:space-between; padding:12px 16px; border-top:1px solid #1d2742; background:#0b1222aa; font-size:12px; color:var(--muted)}
  .btn{border:1px solid #2a3c66; background:#0f1a33; color:var(--ink); padding:8px 12px; border-radius:10px; cursor:pointer}
  .btn:hover{border-color:#3a5fb0}
  .log{margin-top:16px; background:linear-gradient(180deg,#0b1222,#0a0f1a); border:1px dashed #203056; border-radius:14px; padding:12px 14px; color:#b9c7ea}
  details>summary{cursor:pointer; list-style:none; outline:none; user-select:none}
  details>summary::-webkit-details-marker{display:none}
  .log ul{margin:8px 0 0 18px; padding:0}
  .log li{margin:8px 0; line-height:1.6}
  .toast{position:fixed; right:16px; bottom:16px; z-index:40; display:flex; flex-direction:column; gap:8px}
  .note{background:#0f1a33; border:1px solid #284074; color:#cfe6ff; padding:10px 12px; border-radius:10px; box-shadow:var(--shadow); animation:pop .25s ease-out}
  @keyframes pop{from{transform:translateY(6px); opacity:0} to{transform:translateY(0); opacity:1}}
  .modal{position:fixed; inset:0; background:#000000aa; display:none; align-items:center; justify-content:center; z-index:50}
  .modal.show{display:flex}
  .dialog{width:min(860px,92vw); max-height:90vh; overflow:auto; background:linear-gradient(180deg,#111a33,#0b1222); border:1px solid #304a7e; border-radius:16px; padding:18px 18px 8px; box-shadow:var(--shadow)}
  .ending-title{font-size:20px; margin:6px 0 8px; color:var(--gold)}
  .ending-body{line-height:1.9; color:#e9eefc}
  .ending-tags{display:flex; gap:8px; flex-wrap:wrap; margin:8px 0 16px}
  .tag{font-size:11px; color:#0b1324; background:linear-gradient(90deg,#e6c671,#9cd1ff); padding:4px 8px; border-radius:999px}
  @media (max-width:720px){.hud{grid-template-columns:1fr 1fr} .title h1{font-size:16px}}
</style>
</head>
<body class="fog">
  <header>
    <div class="title">
      <span class="dot"></span>
      <div>
        <h1>ã€Šé¢¨å£çš„é‚£å€‹äººã€‹â€” æ‡¸ç–‘äº’å‹•æ•…äº‹ RPG</h1>
        <div class="subtitle">å­©å­è¦–è§’ï½œç¥ç§˜æ„Ÿè¦–è¦ºï½œç²¾ç…‰åŠ‡æƒ…ï½œæ¯å€‹é¸æ“‡éƒ½æ”¹è®Šçµå±€</div>
      </div>
    </div>
  </header>

  <div class="wrap">
    <section class="panel" id="sceneBox">
      <div class="story" id="story">
        <span class="scene-badge">åºç« ãƒ»é¢¨èµ·</span>
        <p id="text">æ ¡é–€å£ä¸€å€‹æˆ´é´¨èˆŒå¸½çš„ç”·äººå¡çµ¦æˆ‘ä¸€å¼µç´™ï¼Œ
          ä»–è²éŸ³åƒè¢«é¢¨åˆ®éï¼š<em>ã€Œåˆ¥ç­‰åˆ°é¢¨å¹ä¾†ï¼Œæ‰æ‰¾åœ°æ–¹èº²ã€‚ã€ </em>ã€‚å›åˆ°å®¶ä¸€åˆ‡å¦‚å¸¸ï¼Œä½†çª—ç¸«è£¡æ¼é€²ä¾†çš„é¢¨ï¼Œå»è®“æˆ‘éš±éš±ä¸å®‰ã€‚</p>
      </div>
      <div class="choices" id="choices"></div>
      <div class="hud">
        <div class="bar"><div class="name">å¿ƒå¢ƒï¼ˆéŸŒæ€§ï¼‰</div><div class="track"><div class="fill" id="b-mind"></div></div></div>
        <div class="bar"><div class="name">å®¶åº­å®‰å…¨æ„Ÿ</div><div class="track"><div class="fill" id="b-safe"></div></div></div>
        <div class="bar"><div class="name">äººéš›æ”¯æŒ</div><div class="track"><div class="fill" id="b-social"></div></div></div>
        <div class="bar"><div class="name">é¢¨éšªé å‚™</div><div class="track"><div class="fill" id="b-prep"></div></div></div>
      </div>
      <div class="footer">
        <div>é€²åº¦ï¼š<span id="stepNow">åºç« </span></div>
        <div><button class="btn" id="restartBtn">é‡æ–°é–‹å§‹</button></div>
      </div>
    </section>

    <section class="log">
      <details open>
        <summary>ğŸ“œ é¸æ“‡æ­·ç¨‹ï¼ˆè‡ªå‹•ç´€éŒ„ï¼‰</summary>
        <ul id="history"></ul>
      </details>
    </section>
  </div>

  <div class="toast" id="toast"></div>

  <div class="modal" id="endingModal" aria-modal="true" role="dialog">
    <div class="dialog">
      <div class="ending-title" id="endingTitle">çµå±€</div>
      <div class="ending-tags" id="endingTags"></div>
      <div class="ending-body" id="endingBody"></div>
      <div style="display:flex; gap:8px; margin:16px 0 10px">
        <button class="btn" id="again">å†ç©ä¸€æ¬¡</button>
        <button class="btn" id="close">é—œé–‰</button>
      </div>
    </div>
  </div>

<script>
// â€”â€”â€” å®‰å…¨åˆå§‹åŒ–ï¼šç­‰ DOM å»ºå¥½å†è·‘ â€”â€”â€”
(function(){
  function ready(fn){ if(document.readyState!=='loading'){ fn(); } else { document.addEventListener('DOMContentLoaded', fn); } }
  ready(main);

  function main(){
    // åŸºæœ¬ç‹€æ…‹
    class GameState{
      constructor(){
        this.mind=45; this.safe=35; this.social=40; this.prep=45; // é¢¨éšªé å‚™ = è³‡é‡‘/è³‡æºç·©è¡
        this.scene=0; this.flags={keptNote:false, toldParents:false, callNeighbor:false, investigate:false, readSecondNote:false};
      }
    }

    // å¿«é€Ÿå– DOM
    const UI={
      text:qs('#text'), choices:qs('#choices'), step:qs('#stepNow'),
      bars:{ mind:qs('#b-mind'), safe:qs('#b-safe'), social:qs('#b-social'), prep:qs('#b-prep') },
      toast:qs('#toast'), history:qs('#history'), modal:qs('#endingModal'),
      endingTitle:qs('#endingTitle'), endingBody:qs('#endingBody'), endingTags:qs('#endingTags')
    };
    const game=new GameState();

    // å·¥å…·
    function qs(s){ const el=document.querySelector(s); if(!el) console.warn('ç¼ºå°‘å…ƒç´ ',s); return el; }
    function notify(msg){ const n=el('div','note'); n.textContent=msg; UI.toast.appendChild(n); setTimeout(()=>n.remove(),2400); }
    function el(tag, cls){ const d=document.createElement(tag); if(cls) d.className=cls; return d; }
    function clamp(v){ return Math.max(0, Math.min(100, v)); }
    function renderBars(){ UI.bars.mind.style.width=clamp(game.mind)+'%'; UI.bars.safe.style.width=clamp(game.safe)+'%'; UI.bars.social.style.width=clamp(game.social)+'%'; UI.bars.prep.style.width=clamp(game.prep)+'%'; }
    function pushHistory(t){ const li=el('li'); li.textContent=t; UI.history.appendChild(li); }

    // éŠæˆ²æµç¨‹
    function reset(){ Object.assign(game,new GameState()); UI.history.innerHTML=''; UI.choices.innerHTML=''; UI.text.innerHTML='æ ¡é–€å£çš„é¢¨å¾ˆæ€¥ã€‚é‚£å€‹æˆ´æ·±è—å¸½çš„äººå¡çµ¦æˆ‘ä¸€å¼µç´™ï¼š<em>ã€Œåˆ¥ç­‰åˆ°é¢¨çœŸçš„å¹ä¾†ï¼Œæ‰æ‰¾åœ°æ–¹èº²ã€‚ã€</em>æˆ‘æŠ¬é ­ï¼Œä»–å·²ä¸è¦‹ã€‚æˆ‘æŠŠç´™å¤¾é€²æ›¸åŒ…ï¼Œæ™šé£¯æ¡Œä¸€åˆ‡å¦‚å¸¸ï¼Œå¿ƒè£¡å»åƒè¢«è¼•è¼•æ•²äº†ä¸€ä¸‹ã€‚'; UI.step.textContent='åºç« '; renderBars(); firstDecision(); }

    function mkChoice(label, on){ const b=el('button','choice'); b.innerHTML=`<strong>é¸é …ï¼š</strong>${label}`; b.onclick=()=>{ b.classList.add('disabled'); try{ on(); renderBars(); }catch(e){ console.error(e); notify('å‡ºç¾å°å•é¡Œï¼Œè«‹å†è©¦ä¸€æ¬¡'); } }; return b; }

    function firstDecision(){ UI.choices.innerHTML=''; UI.step.textContent='æ±ºç­–ä¸€ãƒ»ç´™æ¢';
      UI.choices.append(
        mkChoice('å…ˆæ”¶å¥½ï¼Œè§€å¯Ÿå¹¾å¤©å†èªªã€‚',()=>{ game.flags.keptNote=true; game.prep+=5; game.mind+=2; notify('é¢¨éšªé å‚™ +5ï¼Œå¿ƒå¢ƒ +2'); pushHistory('ä½ è—èµ·ç´™æ¢ï¼šå…ˆè§€å¯Ÿã€‚'); scene1(); }),
        mkChoice('æ™šé¤æ‹¿å‡ºç´™æ¢ï¼Œè·Ÿçˆ¸åª½è¨è«–ã€‚',()=>{ game.flags.toldParents=true; game.social+=6; game.safe+=4; game.prep+=2; notify('äººéš›æ”¯æŒ +6ï¼Œé¢¨éšªé å‚™ +2ï¼Œå®¶åº­å®‰å…¨æ„Ÿ +4'); pushHistory('å…¨å®¶è¨è«–ï¼šé–‹å§‹è«‡æ‡‰è®Šã€‚'); scene1(); }),
        mkChoice('æŠŠç´™æ¢ä¸Ÿäº†ï¼Œåˆ¥æƒ³å¤ªå¤šã€‚',()=>{ game.prep-=3; game.mind-=2; notify('é¢¨éšªé å‚™ -3ï¼Œå¿ƒå¢ƒ -2'); pushHistory('ä½ å¿½ç•¥ä¸å®‰ï¼šä¸Ÿæ‰ç´™æ¢ã€‚'); scene1(); })
      );
    }

    function scene1(){ UI.text.innerHTML='é€±æœ«ï¼Œåª½åª½é–‹è»Šè¼‰æˆ‘å‡ºé–€ï¼Œè»Šå­çªç„¶æ‹‹éŒ¨ï¼Œå¾Œæ–¹è»Šé™£å–‡å­æ­¤èµ·å½¼è½ï¼Œé¢¨å¾çª—ç¸«çŒé€²ä¾†ï¼Œè®“æˆ‘å…¨èº«ç™¼å†·ã€‚'; UI.choices.innerHTML=''; UI.step.textContent='æ±ºç­–äºŒãƒ»æ‹‹éŒ¨';
      UI.choices.append(
        mkChoice('ä¸»å‹•æ±‚åŠ©ï¼šæ‰“é›»è©±çµ¦çˆ¸çˆ¸ï¼Œæˆ–æ˜¯æ‰¾å¯è¯çµ¡çš„é„°å±…ã€‚',()=>{ game.social+=8; game.mind+=3; notify('äººéš›æ”¯æŒ +8ï¼Œå¿ƒå¢ƒ +3'); pushHistory('æ‹‹éŒ¨æ™‚ä½ ä¸»å‹•ä¸²è¯é„°é‡Œã€‚'); scene2(); }),
        mkChoice('è¯çµ¡é“è·¯æ•‘æ´ï¼Œç„¶å¾Œæ‹¿å‡ºä¿æš–èˆ‡åå…‰è£å‚™ã€‚',()=>{ game.safe+=10; game.mind+=2; game.prep+=2; notify('å®¶åº­å®‰å…¨æ„Ÿ +10ï¼Œé¢¨éšªé å‚™ +2ï¼Œå¿ƒå¢ƒ +2'); pushHistory('ä½ åŸ·è¡Œæ¨™æº–æ‡‰è®Šæµç¨‹ã€‚'); scene2(); }),
        mkChoice('ä»€éº¼ä¹Ÿä¸åšï¼Œç­‰è»Šè‡ªå·±å¥½ã€‚',()=>{ game.mind-=6; game.safe-=6; notify('å¿ƒå¢ƒ -6ï¼Œå®¶åº­å®‰å…¨æ„Ÿ -6'); pushHistory('ä½ é¸æ“‡ç¢°é‹æ°£ç­‰å¾…ã€‚'); scene2(); })
      ); }

    function scene2(){ UI.text.innerHTML='å®¶è£¡è®Šå¾—æ‹®æ®ï¼Œçˆ¸çˆ¸ç‚ºäº†è¿½è¢«é¢¨æ²èµ°çš„æ–‡ä»¶ï¼Œæ‘”å€’å—å‚·å¾—æš«åœå·¥ä½œï¼Œé€™æ™‚é„°å±…é›ªä¸­é€ç‚­ã€‚'; UI.choices.innerHTML=''; UI.step.textContent='æ±ºç­–ä¸‰ãƒ»åœæ“º';
      UI.choices.append(
        mkChoice('æŸ¥æ‰¾çˆ¸çˆ¸æœ‰æ²’æœ‰ç•™ä¸‹å¯ä»¥é‹ç”¨çš„ç‰©è³‡ï¼Œæˆ–å¯ä»¥å¹«å¿™çš„äººã€‚',()=>{ game.safe+=12; game.social+=4; game.mind+=2; game.prep+=2; notify('å®¶åº­å®‰å…¨æ„Ÿ +12ï¼Œäººéš›æ”¯æŒ +4ï¼Œé¢¨éšªé å‚™ +2ï¼Œå¿ƒå¢ƒ +2'); pushHistory('ä½ ä¸»å‹•å»ºç«‹æ‡‰è®Šæ¸…å–®ã€‚'); scene3(); }),
        mkChoice('è«‹é„°å±…å”åŠ©æ¥é€èˆ‡æ¡è²·ï¼Œå…ˆæ’éé€™æ®µã€‚',()=>{ game.social+=10; game.safe+=4; notify('äººéš›æ”¯æŒ +10ï¼Œå®¶åº­å®‰å…¨æ„Ÿ +4'); pushHistory('æŠŠäººæƒ…ç¶²è®Šæˆè‡¨æ™‚æ”¯é»ã€‚'); scene3(); }),
        mkChoice('ç¶­æŒç¾ç‹€ï¼Œç›¸ä¿¡å¾ˆå¿«æœƒå¥½ã€‚',()=>{ game.safe-=10; game.mind-=4; notify('å®¶åº­å®‰å…¨æ„Ÿ -10ï¼Œå¿ƒå¢ƒ -4'); pushHistory('ä½ é¸æ“‡ä¸æ”¹è®Šã€‚'); scene3(); })
      ); }

    function scene3(){ UI.text.innerHTML='å¤œè£¡æˆ‘ç™¼èµ·é«˜ç‡’ï¼Œå‰›å¥½é‡ä¸Šé„°å±…è¼‰æˆ‘å€‘ä¸€ç¨‹ã€‚é„°å±…è¡¨ç¤ºå®¶è£¡æœ‰ã€Œç·Šæ€¥æŒ‡å—å†Šã€ï¼Œé‚„æœƒæ¯å¹´æº–å‚™ã€Œé¢¨ä¾†é å‚™é‡‘ã€ã€‚'; UI.choices.innerHTML=''; UI.step.textContent='æ±ºç­–å››ãƒ»æ€¥å¤œ';
      UI.choices.append(
        mkChoice('è©¢å•é„°å±…é˜¿å§¨ï¼Œæœ‰æ²’æœ‰ã€Œé„°å±…ç¾¤ã€Lineï¼Œè¡¨ç¤ºæƒ³åŠ å…¥ï¼Œæœ‰å›°é›£æ™‚äº’ç›¸å¹«åŠ©ã€‚',()=>{ game.social+=12; game.safe+=6; game.mind+=2; notify('äººéš›æ”¯æŒ +12ï¼Œå®¶åº­å®‰å…¨æ„Ÿ +6ï¼Œå¿ƒå¢ƒ +2'); pushHistory('æŠŠå¶ç„¶ç›¸åŠ©è½‰ç‚ºäº’åŠ©ç¶²ã€‚'); scene4(); }),
        mkChoice('å›å®¶ç›¤é»ï¼šå®¶è£¡æœ‰æ²’æœ‰å‚™ç”¨è—¥å“ã€è¦ªæˆšæˆ–æœ‹å‹ç·Šæ€¥è¯çµ¡äººæ¸…å–®ã€æ¼”ç·´èˆ‡é å‚™é‡‘ã€‚',()=>{ game.safe+=10; game.mind+=2; game.prep+=8; notify('å®¶åº­å®‰å…¨æ„Ÿ +10ï¼Œé¢¨éšªé å‚™ +8ï¼Œå¿ƒå¢ƒ +2'); pushHistory('ä½ è£œé½Šç‰©è³‡èˆ‡è³‡é‡‘ç·©è¡ã€‚'); scene4(); }),
        mkChoice('è¦ºå¾—è‡ªå·±é‹æ°£å¤ªå¥½äº†ï¼Œä¸‹æ¬¡å†èªªã€‚',()=>{ game.mind-=4; game.prep-=8; notify('å¿ƒå¢ƒ -4ï¼Œé¢¨éšªé å‚™ -8'); pushHistory('ä½ æŠŠé€£é–å·§åˆè¦–ç‚ºå¶ç„¶ã€‚'); scene4(); })
      ); }

    function scene4(){ UI.text.innerHTML='ç—…å¥½ä¹‹å¾Œï¼Œæˆ‘æ‰¾å‡ºé‚£å¼µç´™ï¼ŒåŸæœ¬çš„å­—è¢«è¦†è“‹æˆï¼š<em>ã€Œé¢¨æ˜¯æé†’ï¼Œä¸æ˜¯æ‡²ç½°ã€‚ã€</em>æˆ‘é¡ä¸Šå†’å‡ºå†·æ±—ï¼Œçœ‹è‘—çˆ¸çˆ¸åšå¾©å¥ï¼Œåª½åª½åœ¨ã€Šç·Šæ€¥æŒ‡å—å†Šã€‹å¯«ä¸Šã€Œé¢¨ä¾†é å‚™é‡‘ã€ã€‚'; UI.choices.innerHTML=''; UI.step.textContent='æ±ºç­–äº”ãƒ»è½‰è§’';
      UI.choices.append(
        mkChoice('æŠŠç´™æ¢äº¤çµ¦çˆ¸åª½ï¼Œå†æ›´ç´®å¯¦å°å†Šå­ä¸­çš„æ¸…å–®èˆ‡é å‚™é‡‘ã€‚',()=>{ game.safe+=10; game.social+=6; game.mind+=4; game.prep+=6; game.flags.readSecondNote=true; notify('å®¶åº­å®‰å…¨æ„Ÿ +10ï¼Œäººéš›æ”¯æŒ +6ï¼Œé¢¨éšªé å‚™ +6'); pushHistory('æŠŠè¬åœ˜åŒ–æˆæ—¥å¸¸å®ˆè­·ã€‚'); ending(); }),
        mkChoice('æ²¿ç·šç´¢å»æ‰¾é‚£å€‹äººã€‚',()=>{ game.prep+=10; game.mind+=4; game.flags.investigate=true; game.flags.readSecondNote=true; notify('é¢¨éšªé å‚™ +10ï¼Œå¿ƒå¢ƒ +4'); pushHistory('ç›´é¢æœªçŸ¥ï¼Œå°‹æ‰¾é¢¨å£å®ˆæœ›è€…ã€‚'); ending(); }),
        mkChoice('æŠŠç´™æ¢æ”¶å›å¤¾å±¤ï¼Œè®“æé†’ç•™åœ¨å¿ƒå£ã€‚',()=>{ game.prep+=4; game.safe+=2; game.flags.keptNote=true; notify('é¢¨éšªé å‚™ +4ï¼Œå®¶åº­å®‰å…¨æ„Ÿ +2'); pushHistory('è®“ç§˜å¯†ç¹¼çºŒåœ¨å¤¾å±¤è£¡å‘¼å¸ã€‚'); ending(); })
      ); }

    function ending(){ UI.choices.innerHTML=''; UI.step.textContent='çµå±€'; const m=game.mind,s=game.safe,n=game.social,p=game.prep; const hidden=game.flags.investigate && p>=65 && game.flags.readSecondNote; let title='', body='', tags=[];
      if(hidden){ title='âœ¨éš±è—çµå±€ãƒ»é¢¨å£çš„å®ˆæœ›è€…'; tags=['ç·šç´¢ä¸²è¯','é¢¨ä¾†é å‚™é‡‘','è¦ºå¯Ÿå³ä¿éšœ']; body='æˆ‘æ²¿è‘—è¨˜æ†¶å»æ‰¾ä»–ï¼šæ ¡é–€è½‰è§’ã€æ©‹é ­è·¯ç‡ˆã€é‚£æ™šå··å£ã€‚ç¬¬ä¸‰å¤©ä¸‹åˆï¼Œä»–éä¾†ä¸€æœ¬å°å†Šï¼šåœˆè‘—å››å­—â€”é„°é‡Œã€æ¸…å–®ã€å‚™æ´ã€<strong>é å‚™é‡‘</strong>ã€‚ã€Œä¸æ˜¯é è¨€ï¼Œåªæ˜¯æé†’ã€‚æ“‹é¢¨é å½¼æ­¤ï¼Œä¹Ÿé é å…ˆå‚™å¥½çš„è³‡æºã€‚ã€å›å®¶å¾Œï¼Œå°å†Šæ”¶å…¥ã€Šç·Šæ€¥æŒ‡å—å†Šã€‹ã€‚é¢¨è²é‚„åœ¨ï¼Œå»è¢«ç¶²èˆ‡é å‚™é‡‘ç·©ä½åŠ›é“ã€‚'; }
      else if(s>=65 && n>=55 && m>=55 && p>=60){ title='ğŸ†ç†æƒ³çµå±€ãƒ»é¢¨æ“‹æˆå½¢'; tags=['å¹³è¡¡ç™¼å±•','é å‚™å®Œæˆ','è³‡é‡‘ç·©è¡']; body='ã€Šç·Šæ€¥æŒ‡å—å†Šã€‹åƒç”Ÿæ´»èªªæ˜æ›¸ï¼šè¯çµ¡æ¨¹ã€æ”¯æ´ç¾¤ã€è—¥å“èˆ‡ä¿æš–ã€æ¼”ç·´ç´€éŒ„ï¼Œä»¥åŠæ¯å¹´å›ºå®šçš„<strong>é¢¨ä¾†é å‚™é‡‘</strong>ã€‚å¶ç„¶ä¸å†æŠŠæˆ‘å€‘å¾€ä¸‹æ‹‰ï¼Œåæˆç‚ºæé†’èˆ‡è·¯æ¨™ã€‚'; }
      else if(p>=65 && n<=48){ title='ğŸ’¼è¦åŠƒçµå±€ãƒ»ç©©è€Œå­¤'; tags=['å°ˆæ³¨è¦åŠƒ','äººéš›åå¼±','è³‡é‡‘åˆ°ä½']; body='æ¸…å–®å®Œå–„ã€é å‚™é‡‘å……è¶³ï¼Œæˆ‘å€‘è¼ƒå°‘éº»ç…©åˆ¥äººã€‚é¢¨è¢«æ“‹åœ¨é–€å£ï¼Œå®¶å¾ˆç©©ï¼›åªæ˜¯æ¨“ä¸Šçš„ç†±æ¹¯å°‘ä¾†äº†å¹¾æ¬¡ï¼Œå··å£æ‹›å‘¼ä¹Ÿè®ŠçŸ­ã€‚'; }
      else if(n>=68 && s>=48 && p>=48){ title='ğŸ¤å’Œè«§çµå±€ãƒ»é„°é‡Œæˆç¶²'; tags=['äººæƒ…ç¶²','äº’åŠ©å…±å¥½','å‚™è€Œä¸é©š']; body='äº’åŠ©ç¾¤é‹ä½œèµ·ä¾†ï¼šæœ‰äººé–‹è»Šã€æœ‰äººè¨˜éŒ„ã€æœ‰äººä¿®é›»å™¨ï¼›åŒæ™‚ç¶­æŒ<em>é å‚™é‡‘</em>ä½œç‚ºç·©è¡ã€‚åœé›»é‚£æ™šï¼Œæ•´æ£Ÿæ¨“é»èµ·æš–é»ƒå°ç‡ˆï¼Œåƒä¸€å¼µæœƒå‘¼å¸çš„ç¶²ã€‚'; }
      else { title='ğŸ’”ç¾å¯¦çµå±€ãƒ»é¢¨ç©¿éç¸«'; tags=['æº–å‚™ä¸è¶³','é é‹æ°£','ä»£åƒ¹æµ®ç¾']; body='ä»é è‡¨æ™‚å·§åˆè£œæ´ã€‚è»Šæ‹‹éŒ¨ã€å¤œè£¡é«˜ç‡’ã€å·¥ä½œåœæ“ºå‹‰å¼·æ’ä¸€ä¸‹ï¼Œå»åœ¨éœ€è¦é•·æœŸè³‡æºæ™‚æ‰è¥Ÿè¦‹è‚˜ã€‚é‚£å¼µç´™åƒåœ¨ç­‰æˆ‘å€‘æ‰¿èªï¼šæ¸…å–®ç¼ºäº†ä¸€æ ¼â€”â€”å¯å•Ÿå‹•çš„è³‡é‡‘ç·©è¡ã€‚'; }
      showEnding(title,tags,body); }

    function showEnding(title,tags,body){ UI.endingTitle.textContent=title; UI.endingBody.innerHTML=body; UI.endingTags.innerHTML=''; tags.forEach(t=>{ const s=el('span','tag'); s.textContent=t; UI.endingTags.appendChild(s); }); UI.modal.classList.add('show'); }

    // ç¶å®š
    qs('#restartBtn').onclick=reset; qs('#again').onclick=()=>{ UI.modal.classList.remove('show'); reset(); }; qs('#close').onclick=()=>UI.modal.classList.remove('show');

    // å•Ÿå‹•
    renderBars(); firstDecision();
  }
})();
</script>
</body>
</html>
